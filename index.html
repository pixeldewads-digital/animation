<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Invoice Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-8">
        <div class="bg-white p-8 rounded-lg shadow-md">
            <h1 class="text-3xl font-bold mb-6 text-gray-800">Meta Invoice Generator</h1>
            <form id="invoice-form" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-4">
                <h2 class="text-lg font-semibold text-gray-700">Informasi Dasar</h2>
                <div>
                    <label for="account_id" class="block text-sm font-medium text-gray-700 mb-1">ID Akun</label>
                    <input id="account_id" name="account_id" type="text" placeholder="695566674863880" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                </div>
                <div>
                    <label for="date" class="block text-sm font-medium text-gray-700 mb-1">Tanggal</label>
                    <input id="date" name="date" type="datetime-local" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                </div>
                <div>
                    <label for="payment_method" class="block text-sm font-medium text-gray-700 mb-1">Metode Pembayaran</label>
                    <select id="payment_method" name="payment_method" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="Kartu Kredit (Visa/Mastercard/Amex)">Kartu Kredit (Visa/Mastercard/Amex)</option>
                        <option value="Kartu Debit">Kartu Debit</option>
                        <option value="PayPal">PayPal</option>
                        <option value="Direct Debit (ACH/SEPA)">Direct Debit (ACH/SEPA)</option>
                        <option value="Bank Transfer / Manual Top-Up">Bank Transfer / Manual Top-Up</option>
                        <option value="Online Banking">Online Banking</option>
                        <option value="Facebook Ad Coupon / Credit">Facebook Ad Coupon / Credit</option>
                        <option value="Lainnya">Lainnyaâ€¦</option>
                    </select>
                    <input id="payment_method_other" type="text" placeholder="Metode lain (isi manual)" class="mt-2 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent hidden" />
                </div>
                <div>
                    <label for="transaction_id" class="block text-sm font-medium text-gray-700 mb-1">ID Transaksi</label>
                    <input id="transaction_id" name="transaction_id" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700" readonly />
                </div>
                <div>
                    <label for="product_type" class="block text-sm font-medium text-gray-700 mb-1">Jenis Produk</label>
                    <input id="product_type" name="product_type" type="text" value="Meta iklan" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                </div>
            </div>
            <!-- Kanan -->
            <div class="space-y-4">
                <h2 class="text-lg font-semibold text-gray-700">Nilai & Status</h2>
                <div>
                    <label for="status" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                    <select id="status" name="status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option>Didanai</option>
                        <option>Tertunda</option>
                        <option>Dibatalkan</option>
                    </select>
                </div>
                <div>
                    <label for="amount" class="block text-sm font-medium text-gray-700 mb-1">Jumlah (contoh: Rp2.500.000)</label>
                    <input id="amount" name="amount" type="text" required placeholder="Rp2.500.000" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                </div>
                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Deskripsi</label>
                    <textarea id="description" name="description" rows="4" placeholder="Receipt for Kemilau Spa" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                </div>
                <div>
                    <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">Catatan (opsional)</label>
                    <input id="notes" name="notes" type="text" placeholder="Tidak ada alasan yang tersedia." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                </div>
            </div>
            <div class="md:col-span-2">
                <button type="submit" id="submit-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 shadow-md hover:shadow-lg">Tambah ke Daftar</button>
            </div>
        </form>
        </div>

        <div id="invoice-output" class="mt-8"></div>
    </div>

    <script>
        document.getElementById('payment_method').addEventListener('change', function() {
            const otherPaymentMethodInput = document.getElementById('payment_method_other');
            if (this.value === 'Lainnya') {
                otherPaymentMethodInput.classList.remove('hidden');
            } else {
                otherPaymentMethodInput.classList.add('hidden');
            }
        });

        document.getElementById('invoice-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const transactionId = 'txn_' + new Date().getTime();
            document.getElementById('transaction_id').value = transactionId;

            function formatDate(dateString) {
                const date = new Date(dateString);
                const day = date.getDate();
                const month = date.toLocaleString('default', { month: 'short' });
                const year = date.getFullYear();
                const hours = date.getHours().toString().padStart(2, '0');
                const minutes = date.getMinutes().toString().padStart(2, '0');
                return `${day} ${month} ${year} ${hours}.${minutes}`;
            }

            const formData = {
                accountId: document.getElementById('account_id').value,
                date: formatDate(document.getElementById('date').value),
                paymentMethod: document.getElementById('payment_method').value === 'Lainnya' ? document.getElementById('payment_method_other').value : document.getElementById('payment_method').value,
                transactionId: transactionId,
                productType: document.getElementById('product_type').value,
                status: document.getElementById('status').value,
                amount: document.getElementById('amount').value,
                description: document.getElementById('description').value,
                notes: document.getElementById('notes').value
            };

            const invoiceOutput = document.getElementById('invoice-output');
            invoiceOutput.innerHTML = `
                <div class="bg-white p-12 rounded-lg shadow-lg max-w-4xl mx-auto my-8 font-sans">
                    <!-- Header -->
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <p class="text-3xl font-bold text-gray-800">Receipt for ${formData.description}</p>
                            <p class="text-gray-500 text-sm">ID Akun: ${formData.accountId}</p>
                        </div>
                        <div class="text-3xl font-bold text-blue-600 flex items-center">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/a/ab/Meta-Logo.svg" alt="Meta Logo" class="w-28">
                        </div>
                    </div>
                    <div class="border-t border-gray-200 my-6"></div>

                    <!-- Body -->
                    <div class="flex justify-between">
                        <!-- Left Column -->
                        <div class="space-y-6 text-sm text-gray-600">
                            <div>
                                <p class="font-semibold text-gray-700">Tanggal Invoice/Pembayaran</p>
                                <p class="font-bold text-gray-800">${formData.date}</p>
                            </div>
                            <div>
                                <p class="font-semibold text-gray-700">Metode Pembayaran</p>
                                <p class="font-bold text-gray-800">${formData.paymentMethod}</p>
                            </div>
                            <div>
                                <p class="font-semibold text-gray-700">ID Transaksi</p>
                                <p class="font-bold text-gray-800">${formData.transactionId}</p>
                            </div>
                            <div>
                                <p class="font-semibold text-gray-700">Jenis Produk</p>
                                <p class="font-bold text-gray-800">${formData.productType}</p>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="text-right">
                            <p class="text-lg font-semibold text-gray-800">${formData.status}</p>
                            <p class="text-5xl font-bold text-gray-900 mt-2">${formData.amount} IDR</p>
                            <p class="text-sm text-gray-500 mt-2">${formData.notes}</p>
                        </div>
                    </div>

                    <div class="border-t border-gray-200 my-8"></div>

                    <div class="text-center mt-8">
                        <button id="download-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">Download PDF</button>
                    </div>
                </div>
            `;

            document.getElementById('download-btn').addEventListener('click', function() {
                const invoiceElement = invoiceOutput.querySelector('.bg-white');
                html2pdf().from(invoiceElement).save('invoice.pdf');
            });
        });
    </script>
</body>
</html>